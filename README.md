# ๐ Rozhn (ุฑูฺู ููฺฉุฑ)

**ูพุฑูฺู Node.js ุจุฑุง ุฏุงูููุฏ ู ุฐุฎุฑูโุณุงุฒ ูุชู ูุฑุขู ฺฉุฑูุ ุชุฑุฌููโูุง ู ุตูุชโูุง ูุงุฑุงู ุงุฒ Quran Foundation API**

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/node-%3E%3D16.0.0-brightgreen.svg)](https://nodejs.org/)
[![API](https://img.shields.io/badge/API-Quran%20Foundation-orange.svg)](https://apis.quran.foundation)

---

## ๐ ูุนุฑู

**Rozhn** (ุจู ูุนูุง "ุฑูุดูุง" ุฏุฑ ุฒุจุงู ุจููฺ) ฺฉ ุงุจุฒุงุฑ ุฎุท ูุฑูุงู (CLI) ูุฏุฑุชููุฏ ุจุฑุง:

- ๐ฅ **ุฏุงูููุฏ ูุชู ุนุฑุจ ูุฑุขู** ุฏุฑ ุฏู ุฎุท `uthmani` ู `imlaei`
- ๐ **ุฏุงูููุฏ ุชุฑุฌููโูุง** ุจู ุฒุจุงูโูุง ูุฎุชูู (ูุงุฑุณุ ุจููฺุ ุงูฺฏูุณ ู...)
- ๐๏ธ **ุฏุงูููุฏ ุงุทูุงุนุงุช ูุงุฑุงู** ุจุง ุฏุณุชูโุจูุฏ ุจุฑ ุงุณุงุณ ุณุจฺฉ ุชูุงูุช
- ๐ **ุงุญุฑุงุฒ ููุช OAuth2** ุจุง Quran Foundation API
- ๐พ **ุฐุฎุฑูโุณุงุฒ ุณุงุฎุชุงุฑููุฏ** ุฏุฑ ูุงูโูุง JSON
- โก **ุณุฑุนุช ุจุงูุง** ู ุนููฺฉุฑุฏ ุจููู

---

## ๐ ูฺฺฏโูุง

### โ ูุงุจูุชโูุง ุงุตู

| ูฺฺฏ | ุชูุถุญุงุช |
|-------|---------|
| ๐ **OAuth2 Authentication** | ุงุญุฑุงุฒ ููุช ุฎูุฏฺฉุงุฑ ุจุง Client Credentials Flow |
| ๐ **ุฏุงูููุฏ ุชูุงู 114 ุณูุฑู** | ุฏุฑุงูุช ูุชู ฺฉุงูู ูุฑุขู ุจุง ฺฉ ุฏุณุชูุฑ |
| ๐ **ูพุดุชุจุงู ุงุฒ ุชุฑุฌููโูุง** | ุฏุงูููุฏ ุชุฑุฌููโูุง ูุชุนุฏุฏ ุจู ุฒุจุงูโูุง ูุฎุชูู |
| ๐ต **ุงุทูุงุนุงุช ูุงุฑุงู** | ูุณุช ฺฉุงูู ูุงุฑุงู ุจุง ุณุจฺฉโูุง Murattalุ Mujawwadุ Muallim |
| ๐ **ุณุงุฎุชุงุฑ ููุธู** | ูุงูโูุง ุจู ุตูุฑุช ุณุงุฒูุงูโุงูุชู ุฏุฑ ูพูุดูโูุง ุฌุฏุงฺฏุงูู |
| ๐ **ุฏุงูููุฏ ุงูุชุฎุงุจ** | ุฏุงูููุฏ ฺฉ ุณูุฑู ุฎุงุต ุง ุชูุงู ุณูุฑูโูุง |
| ๐ **ูุงฺฏโฺฏุฐุงุฑ ุญุฑููโุง** | ููุงุด ูพุดุฑูุช ู ุฎุทุงูุง ุจุง ุงููุฌโูุง ุฑูฺฏ |

---

## ๐ฆ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง

- **Node.js** ูุณุฎู 16 ุง ุจุงูุงุชุฑ
- **npm** ุง **yarn**
- **Client ID** ู **Client Secret** ุงุฒ Quran Foundation

### 1๏ธโฃ ุฏุฑุงูุช ฺฉุฏ

```bash
git clone https://github.com/yourusername/rozhn.git
cd rozhn
```

### 2๏ธโฃ ูุตุจ ูุงุจุณุชฺฏโูุง

```bash
npm install
```

### 3๏ธโฃ ุชูุธู ูุชุบุฑูุง ูุญุท

ูุงู `.env` ุฏุฑ ุฑุดู ูพุฑูฺู ุงุฌุงุฏ ฺฉูุฏ:

```env
CLIENT_ID=your_client_id_here
CLIENT_SECRET=your_client_secret_here
```

> **๐ ูฺฉุชู:** ุจุฑุง ุฏุฑุงูุช Client ID ู Secret ุจู [Quran Foundation Developer Portal](https://quran.foundation) ูุฑุงุฌุนู ฺฉูุฏ.

---

## ๐ฏ ูุญูู ุงุณุชูุงุฏู

### ุฏุณุชูุฑุงุช ุงุตู

#### 1. ุฏุงูููุฏ ูุชู ุนุฑุจ ุณูุฑูโูุง

```bash
# ุฏุงูููุฏ ฺฉ ุณูุฑู ุฎุงุต (ูุซูุงู ุณูุฑู ุงุณู - ุดูุงุฑู 36)
node index.js fetchchapter 36

# ุฏุงูููุฏ ฺฉ ุณูุฑู ุจุง ุฎุท imlaei
node index.js fetchchapter 36 imlaei

# ุฏุงูููุฏ ุชูุงู 114 ุณูุฑู
node index.js fetchchapter
```

**ุฎุฑูุฌ:**
```
output/chapters/uthmani/36/chapter.json
output/chapters/uthmani/chapters_list.json
```

---

#### 2. ุฏุงูููุฏ ุชุฑุฌููโูุง

```bash
# ุฏุงูููุฏ ุชุฑุฌูู ุณูุฑู ุงุณู ุจู ูุงุฑุณ (Translation ID: 135)
node index.js fetchtranslation 36 135

# ุฏุงูููุฏ ุชุฑุฌูู ุชูุงู ุณูุฑูโูุง ุจู ุจููฺ (Translation ID: 124)
node index.js fetchtranslation all 124

# ุฏุงูููุฏ ุจุง ุฎุท imlaei
node index.js fetchtranslation 36 135 imlaei
```

**ุฎุฑูุฌ:**
```
output/chapters/uthmani/36/translation_135.json
```

---

#### 3. ุฏุงูููุฏ ูุชู + ุชุฑุฌูู (Combined)

```bash
# ุฏุงูููุฏ ุณูุฑู ุงุณู ุจุง ุชุฑุฌูู ูุงุฑุณ ุฏุฑ ฺฉ ูุงู
node index.js fetchcombined 36 135

# ุฏุงูููุฏ ุชูุงู ุณูุฑูโูุง ุจุง ุชุฑุฌูู
node index.js fetchcombined all 135
```

**ุณุงุฎุชุงุฑ ุฎุฑูุฌ:**
```json
{
  "chapter": {
    "id": 36,
    "name": "ูุณ",
    "verses_count": 83,
    "revelation_place": "makkah"
  },
  "verses": [
    {
      "verse_number": 1,
      "verse_key": "36:1",
      "text_uthmani": "ูุณู",
      "translation": "ุงุณู"
    }
  ]
}
```

---

#### 4. ุฏุฑุงูุช ูุณุช ุชุฑุฌููโูุง

```bash
node index.js fetchtranslationresources
```

**ุฎุฑูุฌ:**
```
output/resources/translations.json
```

**ูุซุงู:**
```json
{
  "translations": [
    {
      "id": 135,
      "name": "Fooladvand Persian Translation",
      "author_name": "ูุญูุฏููุฏ ูููุงุฏููุฏ",
      "language_name": "persian"
    },
    {
      "id": 124,
      "name": "Balochi Translation",
      "author_name": "ูููู ูุญูุฏ ูพูุงู",
      "language_name": "balochi"
    }
  ]
}
```

---

#### 5. ุฏุฑุงูุช ูุณุช ูุงุฑุงู

```bash
# ูุณุช ุชูุงู ูุงุฑุงู ุจุง ุฏุณุชูโุจูุฏ ุณุจฺฉ
node index.js fetchreciterresources
```

**ุฎุฑูุฌ:**
```
output/resources/reciters.json
```

---

#### 6. ุฏุงูููุฏ ูุงูโูุง ุตูุช ูุงุฑุงู

```bash
node index.js fetchreciters
```

**ุณุงุฎุชุงุฑ ุฎุฑูุฌ:**
```
output/reciters/
โโโ Murattal/          # ุชุฑุชู (ุขูุณุชู ู ุขุฑุงู)
โ   โโโ reciter_1.json
โ   โโโ reciter_2.json
โโโ Mujawwad/          # ุชุฌูุฏ (ุจุง ุขูุงุฒ ู ุชุญุฑุฑ)
โ   โโโ reciter_3.json
โโโ Muallim/           # ุขููุฒุด
    โโโ reciter_4.json
```

---

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
rozhn/
โโโ index.js                    # ููุทู ูุฑูุฏ ุงุตู
โโโ package.json                # ูุงุจุณุชฺฏโูุง ู ุชูุธูุงุช
โโโ .env                        # ูุชุบุฑูุง ูุญุท (CLIENT_ID, CLIENT_SECRET)
โโโ README.md                   # ูุณุชูุฏุงุช
โ
โโโ services/                   # ูุงฺููโูุง ุณุฑูุณ
โ   โโโ auth.js                 # ุงุญุฑุงุฒ ููุช OAuth2
โ   โโโ fetchChapters.js        # ุฏุงูููุฏ ูุชู ุณูุฑูโูุง
โ   โโโ fetchTranslations.js   # ุฏุงูููุฏ ุชุฑุฌููโูุง
โ   โโโ fetchCombined.js        # ุฏุงูููุฏ ูุชู + ุชุฑุฌูู
โ   โโโ fetchReciters.js        # ุฏุงูููุฏ ุงุทูุงุนุงุช ูุงุฑุงู
โ   โโโ fetchReciterResources.js      # ูุณุช ูุงุฑุงู
โ   โโโ fetchTranslationResources.js  # ูุณุช ุชุฑุฌููโูุง
โ
โโโ utils/                      # ุงุจุฒุงุฑูุง ฺฉูฺฉ
โ   โโโ logger.js               # ูุงฺฏโฺฏุฐุงุฑ
โ
โโโ output/                     # ูุงูโูุง ุฎุฑูุฌ
    โโโ chapters/               # ูุชู ู ุชุฑุฌูู ุณูุฑูโูุง
    โ   โโโ uthmani/           # ุฎุท ุนุซูุงู
    โ   โ   โโโ 1/
    โ   โ   โโโ 2/
    โ   โ   โโโ ...
    โ   โโโ imlaei/            # ุฎุท ุงููุง
    โ       โโโ 1/
    โ       โโโ ...
    โโโ reciters/               # ุงุทูุงุนุงุช ูุงุฑุงู
    โ   โโโ Murattal/
    โ   โโโ Mujawwad/
    โ   โโโ Muallim/
    โโโ resources/              # ููุงุจุน ู ูุณุชโูุง
        โโโ translations.json
        โโโ reciters.json
```

---

## ๐ ุงุญุฑุงุฒ ููุช OAuth2

ุงู ูพุฑูฺู ุงุฒ **OAuth2 Client Credentials Flow** ุงุณุชูุงุฏู ูโฺฉูุฏ:

1. **ุฏุฑุงูุช Access Token:**
   - URL: `https://oauth2.quran.foundation/oauth2/token`
   - Method: `POST`
   - Header: `Authorization: Basic {base64(CLIENT_ID:CLIENT_SECRET)}`
   - Body: `grant_type=client_credentials&scope=content`

2. **ุงุณุชูุงุฏู ุงุฒ Token:**
   - ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุจุง header ุฒุฑ ุงุฑุณุงู ูโุดููุฏ:
   ```
   x-auth-token: {access_token}
   x-client-id: {CLIENT_ID}
   ```

---

## ๐ ID ูุง ููู

### ุชุฑุฌููโูุง ูุงุฑุณ

| ID  | ูุงู ูุชุฑุฌู | ุณุจฺฉ |
|-----|----------|-----|
| 135 | ูุญูุฏููุฏ ูููุงุฏููุฏ | ููุธ ุฏูู |
| 131 | ูุงุตุฑ ูฺฉุงุฑู ุดุฑุงุฒ | ุชูุณุฑ |

### ุชุฑุฌููโูุง ุจููฺ

| ID  | ูุงู ูุชุฑุฌู | ุฒุจุงู |
|-----|----------|------|
| 124 | ูููู ูุญูุฏ ูพูุงู | ุจููฺ |
| 125 | ูุชุฑุฌู ุฏฺฏุฑ | ุจููฺ |

### ูุงุฑุงู ูุนุฑูู

| Style | ููููู ูุงุฑ |
|-------|-----------|
| Murattal | ุนุจุฏุงูุจุงุณุท ุนุจุฏุงูุตูุฏุ ูุญููุฏ ุฎูู ุงูุญุตุฑ |
| Mujawwad | ูุดุงุฑ ุงูุนูุงุณุ ุณุนุฏ ุงูุบุงูุฏ |
| Muallim | ูุงุฑุงู ุขููุฒุด ุจุฑุง ฺฉูุฏฺฉุงู |

> **๐ก ูฺฉุชู:** ุจุฑุง ุฏุฏู ูุณุช ฺฉุงูู ุฏุณุชูุฑ `fetchtranslationresources` ุง `fetchreciterresources` ุฑุง ุงุฌุฑุง ฺฉูุฏ.

---

## ๐๏ธ ุชูุณุนู ู ูุดุงุฑฺฉุช

### ุงุถุงูู ฺฉุฑุฏู ูฺฺฏ ุฌุฏุฏ

1. ูุงู ุณุฑูุณ ุฌุฏุฏ ุฏุฑ `services/` ุงุฌุงุฏ ฺฉูุฏ
2. ุชุงุจุน ุงุตู ุฑุง export ฺฉูุฏ
3. ุฏุฑ `index.js` ุจู switch case ุงุถุงูู ฺฉูุฏ

**ูุซุงู:**

```javascript
// services/fetchNewFeature.js
export async function fetchNewFeature(token) {
  // Implementation
}

// index.js
case 'newfeat':
  await fetchNewFeature(token);
  break;
```

### ุงุฌุฑุง ุชุณุชโูุง

```bash
# ุชุณุช ุงุญุฑุงุฒ ููุช
node index.js fetchtranslationresources

# ุชุณุช ุฏุงูููุฏ
node index.js fetchchapter 1
```

---

## โ๏ธ ูฺฉุงุช ููู

### ูุญุฏูุฏุชโูุง API

- **Rate Limiting:** ุญุฏุงฺฉุซุฑ 100 ุฏุฑุฎูุงุณุช ุฏุฑ ุฏููู
- **Token Expiry:** ุชูฺฉูโูุง ุจุนุฏ ุงุฒ 1 ุณุงุนุช ูููุถ ูโุดููุฏ
- **Retry Logic:** ุฏุฑ ุตูุฑุช ุฎุทุงุ 3 ุจุงุฑ ุชูุงุด ูุฌุฏุฏ ุงูุฌุงู ูโุดูุฏ

### ุจูุชุฑู ุดููโูุง

1. โ ููุดู ูุงู `.env` ุฑุง ุจู `.gitignore` ุงุถุงูู ฺฉูุฏ
2. โ ูุจู ุงุฒ ุฏุงูููุฏ ุชูุงู ุณูุฑูโูุงุ ฺฉ ุณูุฑู ุชุณุช ฺฉูุฏ
3. โ ุจุฑุง ุฏุงูููุฏูุง ุจุฒุฑฺฏ ุงุฒ ุดุจ ุงุณุชูุงุฏู ฺฉูุฏ (ฺฉูุชุฑู ุจุงุฑ API)
4. โ ูุงูโูุง ุฎุฑูุฌ ุฑุง ุจู ุตูุฑุช ุฏูุฑูโุง Backup ุจฺฏุฑุฏ

---

## ๐ ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ

### ุฎุทุง: "Failed to get access token"

**ุฑุงูฺฉุงุฑ:**
```bash
# ุจุฑุฑุณ ฺฉูุฏ CLIENT_ID ู CLIENT_SECRET ุฏุฑุณุช ุงุณุช
cat .env

# ุงุทููุงู ุญุงุตู ฺฉูุฏ ูุงู .env ุฏุฑ ุฑุดู ูพุฑูฺู ุงุณุช
ls -la | grep .env
```

### ุฎุทุง: "401 Unauthorized"

**ุฑุงูฺฉุงุฑ:**
- Client ID ุง Secret ุงุดุชุจุงู ุงุณุช
- ุจู [Developer Portal](https://quran.foundation) ูุฑุงุฌุนู ฺฉูุฏ ู credentials ุฌุฏุฏ ุฏุฑุงูุช ฺฉูุฏ

### ุฎุทุง: "ECONNREFUSED"

**ุฑุงูฺฉุงุฑ:**
- ุงุชุตุงู ุงูุชุฑูุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุงุฑูุงู ุง VPN ููฺฉู ุงุณุช API ุฑุง ุจูุงฺฉ ฺฉุฑุฏู ุจุงุดุฏ

---

## ๐ ููุงุจุน ููุฏ

- ๐ [Quran Foundation API Documentation](https://apis.quran.foundation/docs)
- ๐ [OAuth2 Client Credentials Guide](https://oauth.net/2/grant-types/client-credentials/)
- ๐ฌ [GitHub Issues](https://github.com/yourusername/rozhn/issues)

---

## ๐ ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุงุณูุณ **MIT** ููุชุดุฑ ุดุฏู ุงุณุช. ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ ูุงู [LICENSE](LICENSE) ุฑุง ูุทุงูุนู ฺฉูุฏ.

---

## ๐จโ๐ป ููุณูุฏู

**Mohammad Jamalzadeh**
- ๐ง Email: your.email@example.com
- ๐ GitHub: [@yourusername](https://github.com/yourusername)

---

## ๐ ุชุดฺฉุฑ ู ูุฏุฑุฏุงู

- ุงุฒ **Quran Foundation** ุจุฑุง ุงุฑุงุฆู API ุฑุงฺฏุงู ู ฺฉุงูู
- ุงุฒ ุฌุงูุนู ูุชูโุจุงุฒ Node.js ุจุฑุง ุงุจุฒุงุฑูุง ูููโุงูุนุงุฏู

---

## ๐ ุณุชุงุฑู ุฏุงุฏู

ุงฺฏุฑ ุงู ูพุฑูฺู ุจุฑุงุชุงู ููุฏ ุจูุฏุ ูุทูุงู ฺฉ โญ ุณุชุงุฑู ุฏุฑ GitHub ุจุฏูุฏ!

```bash
# ุฏุงูููุฏ ุขุฎุฑู ูุณุฎู
git pull origin main

# ุงุฌุฑุง ุณุฑุน
npm start
```

---

**ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุจุฑุง ุฌุงูุนู ูุณููุงูุงู ุฌูุงู** ๐
